--
-- PostgreSQL database dump
--

-- Dumped from database version 9.6.3
-- Dumped by pg_dump version 9.6.3

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SET check_function_bodies = false;
SET client_min_messages = warning;
SET row_security = off;

--
-- Name: plpgsql; Type: EXTENSION; Schema: -; Owner: 
--

CREATE EXTENSION IF NOT EXISTS plpgsql WITH SCHEMA pg_catalog;


--
-- Name: EXTENSION plpgsql; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION plpgsql IS 'PL/pgSQL procedural language';


SET search_path = public, pg_catalog;

SET default_tablespace = '';

SET default_with_oids = false;

--
-- Name: function; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE function (
    id integer NOT NULL,
    function character(40) DEFAULT 'nofunction'::bpchar NOT NULL,
    pay integer DEFAULT 0 NOT NULL
);


ALTER TABLE function OWNER TO postgres;

--
-- Name: TABLE function; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE function IS 'профессия';


--
-- Name: COLUMN function.id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN function.id IS 'идентификатор';


--
-- Name: COLUMN function.pay; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN function.pay IS 'зарплата';


--
-- Name: function_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE function_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE function_id_seq OWNER TO postgres;

--
-- Name: SEQUENCE function_id_seq; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON SEQUENCE function_id_seq IS 'DbWrench Autogenerated Sequence.';


--
-- Name: photo; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE photo (
    id integer NOT NULL,
    working_id integer NOT NULL,
    date_photo date,
    name character(40)
);


ALTER TABLE photo OWNER TO postgres;

--
-- Name: TABLE photo; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE photo IS 'фотография';


--
-- Name: COLUMN photo.id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN photo.id IS 'идентификатор';


--
-- Name: COLUMN photo.working_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN photo.working_id IS 'номер работы';


--
-- Name: COLUMN photo.date_photo; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN photo.date_photo IS 'дата создания';


--
-- Name: COLUMN photo.name; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN photo.name IS 'название';


--
-- Name: photo_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE photo_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE photo_id_seq OWNER TO postgres;

--
-- Name: SEQUENCE photo_id_seq; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON SEQUENCE photo_id_seq IS 'DbWrench Autogenerated Sequence.';


--
-- Name: photographer; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE photographer (
    id integer NOT NULL,
    name character(20) DEFAULT 'noname'::bpchar NOT NULL,
    fename character(20),
    middle_name character(20),
    date_birth date
);


ALTER TABLE photographer OWNER TO postgres;

--
-- Name: TABLE photographer; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE photographer IS 'фотограф';


--
-- Name: COLUMN photographer.id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN photographer.id IS 'идентификатор';


--
-- Name: COLUMN photographer.name; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN photographer.name IS 'имя';


--
-- Name: COLUMN photographer.fename; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN photographer.fename IS 'фамилия';


--
-- Name: COLUMN photographer.middle_name; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN photographer.middle_name IS 'отчество';


--
-- Name: COLUMN photographer.date_birth; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN photographer.date_birth IS 'дата рождения';


--
-- Name: photographer_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE photographer_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE photographer_id_seq OWNER TO postgres;

--
-- Name: SEQUENCE photographer_id_seq; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON SEQUENCE photographer_id_seq IS 'DbWrench Autogenerated Sequence.';


--
-- Name: room; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE room (
    num integer NOT NULL,
    floor integer NOT NULL,
    worker integer
);


ALTER TABLE room OWNER TO postgres;

--
-- Name: TABLE room; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE room IS 'зал';


--
-- Name: COLUMN room.num; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN room.num IS 'номер зала';


--
-- Name: COLUMN room.floor; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN room.floor IS 'этаж';


--
-- Name: COLUMN room.worker; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN room.worker IS 'рабочий в зале';


--
-- Name: room_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE room_id_seq
    START WITH 100
    INCREMENT BY 1
    MINVALUE 0
    NO MAXVALUE
    CACHE 1;


ALTER TABLE room_id_seq OWNER TO postgres;

--
-- Name: worker; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE worker (
    id integer NOT NULL,
    name character(20) DEFAULT 'noname'::bpchar NOT NULL,
    fename character(20),
    middle_name character(20),
    date_birth date,
    function integer NOT NULL
);


ALTER TABLE worker OWNER TO postgres;

--
-- Name: TABLE worker; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE worker IS 'рабочий';


--
-- Name: COLUMN worker.id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN worker.id IS 'идентификатор';


--
-- Name: COLUMN worker.name; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN worker.name IS 'имя';


--
-- Name: COLUMN worker.fename; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN worker.fename IS 'фамилия';


--
-- Name: COLUMN worker.middle_name; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN worker.middle_name IS 'отчество';


--
-- Name: COLUMN worker.date_birth; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN worker.date_birth IS 'дата рождения';


--
-- Name: COLUMN worker.function; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN worker.function IS 'профессия';


--
-- Name: worker_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE worker_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE worker_id_seq OWNER TO postgres;

--
-- Name: SEQUENCE worker_id_seq; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON SEQUENCE worker_id_seq IS 'DbWrench Autogenerated Sequence.';


--
-- Name: working; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE working (
    id integer NOT NULL,
    date_working date,
    subject character(15),
    photographer integer NOT NULL,
    room integer NOT NULL
);


ALTER TABLE working OWNER TO postgres;

--
-- Name: TABLE working; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE working IS 'работа';


--
-- Name: COLUMN working.id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN working.id IS 'идентификатор';


--
-- Name: COLUMN working.date_working; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN working.date_working IS 'дата создания';


--
-- Name: COLUMN working.subject; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN working.subject IS 'тема';


--
-- Name: COLUMN working.photographer; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN working.photographer IS 'фотограф';


--
-- Name: COLUMN working.room; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN working.room IS 'номер зала';


--
-- Name: working_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE working_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE working_id_seq OWNER TO postgres;

--
-- Name: SEQUENCE working_id_seq; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON SEQUENCE working_id_seq IS 'DbWrench Autogenerated Sequence.';


--
-- Data for Name: function; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY function (id, function, pay) FROM stdin;
1	director                                	15000
2	caretaker                               	7000
3	guide                                   	10000
4	cleaner                                 	5000
5	cashier                                 	7000
6	guard                                   	5000
\.


--
-- Name: function_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('function_id_seq', 1, false);


--
-- Data for Name: photo; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY photo (id, working_id, date_photo, name) FROM stdin;
1	1	2014-08-10	sea and me                              
2	1	2014-08-13	\N
3	1	2014-08-01	ship                                    
4	2	2005-01-15	pines                                   
5	2	2005-01-15	birch                                   
6	3	\N	she                                     
7	4	2007-04-01	apple                                   
8	4	2007-04-02	pear                                    
9	5	2012-09-28	\N
10	6	2015-05-25	squirrel                                
11	6	2015-05-25	\N
12	7	\N	fruit                                   
13	7	\N	\N
14	7	\N	vine                                    
\.


--
-- Name: photo_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('photo_id_seq', 1, false);


--
-- Data for Name: photographer; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY photographer (id, name, fename, middle_name, date_birth) FROM stdin;
1	pan                 	lukash              	\N	\N
2	stepan              	vanin               	nikolaevich         	\N
3	ivan                	geroev              	sergeevich          	1990-08-14
4	doro                	\N	\N	\N
5	jack                	guga                	\N	1976-09-21
\.


--
-- Name: photographer_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('photographer_id_seq', 1, false);


--
-- Data for Name: room; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY room (num, floor, worker) FROM stdin;
11	1	2
12	1	3
13	1	\N
21	2	5
22	2	\N
23	2	\N
100	5	\N
\.


--
-- Name: room_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('room_id_seq', 100, true);


--
-- Data for Name: worker; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY worker (id, name, fename, middle_name, date_birth, function) FROM stdin;
1	ivan                	nikolaev            	vladimirovich       	1960-07-14	1
2	kirill              	vlasov              	olegovich           	1989-11-11	2
3	marina              	ekimova             	andreevna           	1983-01-12	2
4	daria               	kopter              	semenovna           	1970-07-14	3
5	nikolai             	kilon               	matveevich          	1982-06-22	2
6	ksenia              	krasnova            	pavlovna            	1964-03-20	4
7	stepan              	razin               	olegovich           	1984-07-14	6
8	vasilii             	kyzmin              	andreevich          	1980-08-15	5
9	sonya               	ryn                 	pavlovna            	1981-09-16	3
500	lol                 	k                   	ads                 	1000-01-01	2
10	asd                 	asd                 	asd                 	1000-12-12	1
\.


--
-- Name: worker_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('worker_id_seq', 10, true);


--
-- Data for Name: working; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY working (id, date_working, subject, photographer, room) FROM stdin;
1	2014-08-17	landscape      	1	11
2	2005-01-20	landscape      	1	11
3	\N	portrait       	2	12
4	2007-04-15	still life     	3	12
5	2012-10-02	portrait       	4	13
6	2015-06-03	landscape      	2	21
7	\N	still life     	5	22
\.


--
-- Name: working_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('working_id_seq', 1, false);


--
-- Name: function function_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY function
    ADD CONSTRAINT function_pkey PRIMARY KEY (id);


--
-- Name: photo photo_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY photo
    ADD CONSTRAINT photo_pkey PRIMARY KEY (id);


--
-- Name: photographer photographer_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY photographer
    ADD CONSTRAINT photographer_pkey PRIMARY KEY (id);


--
-- Name: room room_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY room
    ADD CONSTRAINT room_pkey PRIMARY KEY (num);


--
-- Name: room room_worker_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY room
    ADD CONSTRAINT room_worker_key UNIQUE (worker);


--
-- Name: worker worker_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY worker
    ADD CONSTRAINT worker_pkey PRIMARY KEY (id);


--
-- Name: working working_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY working
    ADD CONSTRAINT working_pkey PRIMARY KEY (id);


--
-- Name: photo photo_fk1; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY photo
    ADD CONSTRAINT photo_fk1 FOREIGN KEY (working_id) REFERENCES working(id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- Name: room room_fk2; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY room
    ADD CONSTRAINT room_fk2 FOREIGN KEY (worker) REFERENCES worker(id) ON UPDATE CASCADE ON DELETE SET DEFAULT;


--
-- Name: worker worker_fk2; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY worker
    ADD CONSTRAINT worker_fk2 FOREIGN KEY (function) REFERENCES function(id) ON UPDATE CASCADE ON DELETE RESTRICT;


--
-- Name: working working_fk1; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY working
    ADD CONSTRAINT working_fk1 FOREIGN KEY (photographer) REFERENCES photographer(id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- Name: working working_fk2; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY working
    ADD CONSTRAINT working_fk2 FOREIGN KEY (room) REFERENCES room(num) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- PostgreSQL database dump complete
--

